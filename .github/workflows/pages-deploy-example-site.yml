name: Deploy Example Site to GitHub Pages

on:
  workflow_dispatch:
    inputs:
      tag:
        description: 'Docs tag to deploy'
        required: true
        type: string
      mkdocs-terminal-version:
        description: 'with mkdocs-terminal version'
        required: false
        type: string
      example-site-name:
        description: 'name of site in ./tests/examples/'
        required: true
        type: choice
        options:
          - highlightjs
          - highlightjs-dark

jobs:
  deploy-example-site:
    name: Deploy ${{ inputs.example-site-name }}
    environment: ${{ inputs.example-site-name }}
    uses: ntno/mkdocs-terminal/.github/workflows/reusable-pages-deploy.yml@main
    with:
      tag: ${{ inputs.tag }}
      mkdocs-terminal-version: ${{ inputs.mkdocs-terminal-version }}
      example-site-name: ${{ inputs.example-site-name }}
    secrets:
      GH_DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }}

  deploy-highlightjs-example:
    name: Deploy ${{ inputs.example-site-name }}
    if: inputs.example-site-name == 'highlightjs'
    uses: ntno/mkdocs-terminal/.github/workflows/reusable-pages-deploy.yml@main
    with:
      tag: ${{ inputs.tag }}
      mkdocs-terminal-version: ${{ inputs.mkdocs-terminal-version }}
      example-site-name: 'highlightjs'
    secrets:
      GH_DEPLOY_KEY: ${{ secrets.DEPLOY_KEY_HIGHLIGHTJS }}

  deploy-highlightjs-dark-example:
    name: Deploy ${{ inputs.example-site-name }}
    if: inputs.example-site-name == 'highlightjs-dark'
    uses: ntno/mkdocs-terminal/.github/workflows/reusable-pages-deploy.yml@main
    with:
      tag: ${{ inputs.tag }}
      mkdocs-terminal-version: ${{ inputs.mkdocs-terminal-version }}
      example-site-name: 'highlightjs-dark'
    secrets:
      GH_DEPLOY_KEY: ${{ secrets.DEPLOY_KEY_HIGHLIGHTJS_DARK }}