{% macro make_toc( toc ) -%}
{%- if toc and toc is iterable and toc|length > 0 -%}
<nav>
    <ul>
        {% for toc_item in toc %}
        <li><a href="{{ toc_item.url }}">{{ toc_item.title}}</a></li>
            {% for toc_item in toc_item.children %}
            <li><a href="{{ toc_item.url }}">{{ toc_item.title }}</a></li>
            {% endfor %}
        {% endfor %}
    </ul>
</nav>
{%- endif -%}
{%- endmacro -%}